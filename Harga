<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kembali</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>
<body style="background-color: #f9f9f9">
  <style>
    @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css");

    .bg-head {
      background: #1976d3;
      height: 100px;
      border-radius: 0 0 25px 25px

    }
    .inp-nomor {
      border-radius: 5px;
      border: none;
      box-shadow: 1px 2px 5px rgba(10, 10, 10, 0.137);
    }
    .lab {
      z-index: 1;
      border: 1px solid white;
      width: 60px;
      font-size: 10px;
      display: flex;
      justify-content: center;
      margin-left: 10px;
      background-color: white;
      font-weight: 550;
      color: #1976d3;
    }
    .form-lb {
      font-size: 13px;
      padding: 10px;
      font-weight: 500;
      background-color: transparent;
      margin-top: -10px
    }
    .form-lb:focus {
      box-shadow: none;
      border: 0.1px solid #1976d3;
      background-color: transparent;
    }
    ::placeholder {
      font-size: 13px;
      font-weight: 450;
    }
    .fsrc {
      color: #000;
    }
    .produk-nama {
      margin-bottom: 0;
      font-size: 13px;
      font-weight: 500;
      opacity: 0.9;
    }
    .produk-brand {
      margin-bottom: 0;
      font-size: 12px;
      opacity: 0.7;
      margin-top: -3px;
    }
    .produk-harga {
      margin-bottom: 0;
      font-size: 13px;
      font-weight: 500;
      color: #1976d3;
      font-weight: bold;
    }
    .c-produk {
      border: none;
      box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 5px 1px;
    }
    .btn-select {
      border: 1px solid #1976d3;
      color: #1976d3;
      border-radius: 15px;
      width: 100%;
      background-color: white;
      font-size: 12px;
      transition: 300ms all;
    }
    .btn-select-act {
      color: #000;
    }
    .for-load {
      color: red;
      font-size: 12px;
      font-style: italic;
    }
    .text-null {
      font-weight: 600;
      opacity: 0.7;
      font-size: 13px;
    }
    .rc {
      margin-bottom: 0;
      margin-top:1px;
      color: white;
      font-size: 13px;
      font-weight: 600;
    }
    .bg-canvas {
      background-color: #1976d3;
      color: white;
      border-top-left-radius: 10px ;
      border-top-right-radius: 10px ;
    }
    .offcanvas-bottom {
      height: auto !important;
      border-top-left-radius: 10px ;
      border-top-right-radius: 10px ;
    }

    .indx {
      font-size: 12px;
      font-weight: 500;
      opacity: 0.7;
      margin-bottom: 0px;
    }
    .val {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 0px;
    }
    .dashed{
      border-top: 1px dashed #8c8b8b;
    }
    .bo {
      box-shadow: 1px 1px 3px #8c8b8b;
    }
    .desc {
      font-size: 12px;
      opacity: 0.7;
    }

    .btn-beli {
      background-color: #1976d3;
      border: #1976d3;
      color: white;
      border-radius: 5px;
      font-size: 13px; 
      text-transform: uppercase;
    }
    .btn-batal {
      background-color: #808080;
      border: #808080;
      color: white;
      border-radius: 5px;
      font-size: 13px; 
      text-transform: uppercase;
    }

    #search:focus {
      box-shadow: none;
      border: 0.1px solid #1976d3;
    }
    .c-hijau {
      color: #1976d3;
      margin-top: -35px;
      margin-bottom: 15px;
      width: 10px;
      margin-left: 90%;
      position: relative;
    }
    *{
      user-select: none ;
    }
    ::-webkit-scrollbar {
      width: 1px;
    }
    .dropdown-menu {
     overflow: auto;
     width: auto;
     border: none;
     box-shadow: 1px 4px 10px rgba(14, 14, 14, 0.11);
   }  
   .banners {
    padding: 10px;
    border-radius: 10px;
    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 5px 0px;
    position: relative;
    z-index: 100;
    background-color: #fff

  }
  .img-banners {
    border-radius: 10px
  }
  .dropdown-menu.show {
    margin-top: -10px
  }
  .axd {
    pointer-events: none;
  }

  .indx2 {
    font-size: 12px;
    font-weight: 400;
    opacity: 0.7;
    margin-bottom: 0px;
  }
</style>
<div class="bg-head"></div>

<div class="container" style="margin-top: -80px">

  <div class="card inp-nomor p-3 mb-2 shadow-sm mt-2">
    <p class="fw-bold">Daftar Harga</p>
    <label for="katPertama" class="lab" >Kategori</label>

    <input class="form-control form-lb text-center" readonly placeholder="-- Pilih Kategori --" data-bs-toggle="offcanvas" data-bs-target="#Id2" aria-controls="Id2" id="katPertama" type="text">

  </div>



  <!-- Pil Kat -->
  <div class="offcanvas offcanvas-bottom" data-bs-backdrop="static" tabindex="-1" id="Id2" aria-labelledby="staticBackdropLabel">
    <div class="bg-canvas px-3 py-3"  data-bs-dismiss="offcanvas" aria-label="Close">
      <center>
        <div class="d-block" style="height: 5px; width: 20%; background-color: #eaeaea; border-radius: 15px" >
        </div>
      </center>
    </div>
    <div class="container">
      <p class="ftt fw-bold pt-1"> Pilih Kategori</p>

      <input class="form-control form-lb mt-2 mb-2" placeholder="Cari Kategori Disini " id="src" type="search"/>
    </div> 

    <div class="offcanvas-body" id="katUtama"></div>

  </div>

  <section id="bigDataReg">
     <div id="for-ld" class=" body text-center">
    <center>
      <figure class="figure">
        <img alt="sdigital" class="shadow-sm d-block mx-auto mt-4" style="width: 90%; border-radius: 20px" src="https://img.freepik.com/premium-vector/no-data-concept-illustration_203587-28.jpg">
      </figure>  
      </center>
      <p class="for-load">Silahkan Pilih Kategori Terlebih Dahulu...</p>
    </div>
  </section>

  <!-- Pil Sub Kat -->

  <!-- loader -->





  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

  <script type="text/javascript">
    var apikey = "e057af84de3c72f25d23c1fabf27e6badb3ced0784821d9505d66f2b99a3a9e2"

    var _0x81c2=["\x68\x74\x74\x70\x73\x3A\x2F\x2F\x6E\x69\x65\x6C\x7A\x2E\x65\x73\x73\x61\x6B\x75\x2E\x63\x6F\x6D\x2F\x76\x32\x2F\x66\x69\x74\x75\x72\x2F\x62\x6F\x3F"];const baseUrl=_0x81c2[0]

    const urlTko = 'https://simpelinaja.my.id'

    const load = `<div id="for-ld2" class="container text-center">
    <div class="spinner-border m-5" role="status" style="width: 30px; height:30px;color:#0babff;">
    <span class="visually-hidden">Loading...</span>
    </div>
    </div>`

    $("#Id2").addClass("show")


    getSubKat(urlTko)

    function getSubKat(link) {

      $.ajax({
        type: "POST",
        url: baseUrl,
        data: {
          aktivasi: apikey,
          param: 'kategori',
          url: link,

        },
        dataType: "JSON",
        success: function (response) {

          loopingSubKat(response.data)

        }
      })
    }

    function loopingSubKat(data) {
      console.log(data)
      $.each(data, function (i, v) {
        var url = v.nama_kategori;
        var str = url.split("\n");
        var produkz = str[1];
        var prox = produkz.split(">")
        var prex = prox[3]
        if (prex != undefined) {
          $("#katUtama").append(`<div class="d-block dataKat" id="katz" data-bs-dismiss="offcanvas" aria-label="Close" onclick="getProdKat('${v.url_kategori}', '${prex}')">
            <p class="indx me-5 mb-3 pb-2" style="width: 100%; border-bottom: 1px solid rgba(0, 0, 0, 0.1)">${prex}</p>

            </div>`)
        }
        
      })
    } 

    function getProdKat(link, nama) {
      $("#katPertama").val(nama)

      $.ajax({
       type: "POST",
       url: baseUrl,
       data: {
        aktivasi: apikey,
        param: 'produk',
        url: link,

      },
      dataType: "JSON",
      beforeSend:function(){
        $("#for-ld2").show()
        $("#bigDataReg").html(load)
      },
      success: function (response) {
        console.log(response)
        $("#for-ld2").hide()

        if(response.data == null) {
          $("#bigDataReg").html(dataNull)
        }
        $("#bigDataReg").html(`<div class="dataProduk animate__animated animate__fadeIn"></div>`)
        loopingProd(response.data)
      }
    });
    }


    function loopingProd(data) {

      $.each(data, function (i, v) { 
        $(".dataProduk").append(`<div class="card p-2 c-produk mb-2 shadow-sm">
          <div class="container">
          <div class="row">
          <div class="col-8 text-start" style="padding:0;padding-right:10px;width:72.666667%">
          <p class="produk-nama">${v.nama}</p>
          </div>
          <div class="col-4 text-end" style="padding:0;width:26.333333%">
          <p class="produk-harga">${v.harga}</p>
          </div>
          </div>
          </div>
          </div>`)
      });
    }

  
    $(document).ready(function(){
      $("#src").on("input", function() {
        var value = $(this).val().toLowerCase();
        $("#katz p").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });


  </script>


</body>
</html>
